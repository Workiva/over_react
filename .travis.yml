language: dart
dart:
  - 2.4.1
  - stable
  - dev
script:
  - pub run build_runner build --delete-conflicting-outputs
  - git diff --exit-code
  - pub run dart_dev analyze
  - pub run dependency_validator -i test_html_builder
  # run tests on ddc output
  - pub run dart_dev test
  # run tests on dart2js output
  - pub run dart_dev test-release

cache:
  directories:
   - $HOME/.pub-cache
   - $HOME/.dart_tool/build
